import"./chunk-BYXBJQAS.js";import{B as $,b as A,c as R,e as z,g as D,i as j,y as J,z as K}from"./chunk-57XGBVN7.js";import{l as L,m as W,p as N}from"./chunk-VLIKV6YA.js";import{$ as b,$a as r,Ab as F,Ca as g,Hb as I,Ib as V,Jb as E,Qa as f,Ta as C,Xa as T,ab as a,bb as x,fb as P,ia as s,ib as m,ja as _,jb as p,mb as B,nb as M,sb as S,tb as c,ub as y,vb as h,wb as u,xb as O,yb as v,za as k}from"./chunk-KZNR27XO.js";function q(l,e){if(l&1){let t=P();r(0,"button",5),m("click",function(){s(t);let n=p();return _(n.clearFilter())}),x(1,"i",6),a()}}function U(l,e){if(l&1&&x(0,"img",10),l&2){let t=p().$implicit;B("alt",t.volumeInfo.title),C("src",t.volumeInfo.imageLinks==null?null:t.volumeInfo.imageLinks.thumbnail,k)}}function G(l,e){l&1&&(r(0,"h6"),c(1,"This book does not have a cover"),a())}function H(l,e){if(l&1){let t=P();r(0,"li"),c(1),r(2,"button",22),m("click",function(){let n=s(t).index,o=p().$implicit,d=p(2);return _(d.removeTag(o,n))}),x(3,"i",23),a()()}if(l&2){let t=e.$implicit;g(),h(" ",t," ")}}function Q(l,e){if(l&1){let t=P();r(0,"div",9)(1,"section"),f(2,U,1,2,"img",10)(3,G,2,0,"h6"),r(4,"h2",11),c(5),a(),r(6,"h4",12),c(7),I(8,"date"),a()(),r(9,"article")(10,"div",13)(11,"label",14),c(12,"Range ( "),r(13,"span"),c(14),a(),c(15," )"),a(),r(16,"p-rating",15),v("ngModelChange",function(n){let o=s(t).$implicit;return O(o.range,n)||(o.range=n),_(n)}),m("onRate",function(){let n=s(t).$implicit,o=p(2);return _(o.updateBook(n))}),a()(),r(17,"div")(18,"label",14),c(19,"Tags:"),a(),r(20,"ul"),f(21,H,4,1,"li",16),a(),r(22,"div",17)(23,"input",18),v("ngModelChange",function(n){let o=s(t).$implicit,d=p(2);return O(d.newTag[o.id],n)||(d.newTag[o.id]=n),_(n)}),a(),r(24,"button",5),m("click",function(){let n=s(t).$implicit,o=p(2);return _(o.addTag(n))}),c(25,"Add Tag "),x(26,"i",19),a()()(),r(27,"div",13)(28,"label",14),c(29,"Notes"),a(),r(30,"textarea",20),v("ngModelChange",function(n){let o=s(t).$implicit;return O(o.notes,n)||(o.notes=n),_(n)}),m("input",function(){let n=s(t).$implicit,o=p(2);return _(o.updateBook(n))}),a()(),r(31,"div")(32,"label",14),c(33,"Remove \u2794"),a(),r(34,"input",21),v("ngModelChange",function(n){let o=s(t).$implicit;return O(o.favorite,n)||(o.favorite=n),_(n)}),m("ngModelChange",function(){let n=s(t).$implicit,o=p(2);return _(o.toggleFavorite(n))}),a()()()()}if(l&2){let t=e.$implicit,i=p(2);g(2),T(t.volumeInfo.imageLinks?2:3),g(3),y(t.volumeInfo.title),g(2),h("Date: ",V(8,23,t.volumeInfo.publishedDate,"MMMM d, y"),""),g(4),M("for","range-",t.id,""),g(3),y(t.range),g(2),u("ngModel",t.range),C("readonly",!1)("cancel",!1),g(2),M("for","tags-",t.id,""),g(3),C("ngForOf",t.tags),g(2),u("ngModel",i.newTag[t.id]),g(5),M("for","notes-",t.id,""),g(2),M("id","notes-",t.id,""),u("ngModel",t.notes),g(2),M("for","favorite-",t.id,""),g(2),M("id","favorite-",t.id,""),u("ngModel",t.favorite)}}function X(l,e){if(l&1&&(r(0,"div",7),f(1,Q,35,26,"div",8),a()),l&2){let t=p();g(),C("ngForOf",t.filteredBooks)("ngForTrackBy",t.trackById)}}function Y(l,e){l&1&&(r(0,"h3"),c(1,"No books found, filter another tag"),a())}var w=class l{favoriteBooks=[];filteredBooks=[];newTag={};filterTag="";ngOnInit(){this.getFavoriteBooks(),this.filteredBooks=[...this.favoriteBooks]}getFavoriteBooks(){let e=JSON.parse(localStorage.getItem("@book-detail-list")||"[]");this.favoriteBooks=e.filter(t=>t.favorite===!0).map(t=>(typeof t.tags=="string"?t.tags=t.tags.split(","):Array.isArray(t.tags)||(t.tags=[]),t)),this.filteredBooks=[...this.favoriteBooks]}updateBook(e){let t=JSON.parse(localStorage.getItem("@book-detail-list")||"[]"),i=t.findIndex(n=>n.id===e.id);i!==-1&&(t[i]=e,localStorage.setItem("@book-detail-list",JSON.stringify(t)))}toggleFavorite(e){this.updateBook(e),e.favorite?this.getFavoriteBooks():this.removeBook(e)}removeBook(e){let i=JSON.parse(localStorage.getItem("@book-detail-list")||"[]").filter(n=>n.id!==e.id);localStorage.setItem("@book-detail-list",JSON.stringify(i)),this.getFavoriteBooks()}trackById(e,t){return t.id}addTag(e){let t=this.newTag[e.id]?.trim();if(t&&t.length>0){if(Array.isArray(e.tags)||(e.tags=[]),e.tags.length>=3)return;e.tags.push(t),this.newTag[e.id]="",this.updateBook(e)}}removeTag(e,t){Array.isArray(e.tags)&&(e.tags.splice(t,1),this.updateBook(e))}filterByTag(){this.filterTag.trim()===""?this.filteredBooks=[...this.favoriteBooks]:this.filteredBooks=this.favoriteBooks.filter(e=>e.tags.some(t=>t.toLowerCase().includes(this.filterTag.toLowerCase())))}clearFilter(){this.filterTag="",this.filteredBooks=[...this.favoriteBooks]}static \u0275fac=function(t){return new(t||l)};static \u0275cmp=b({type:l,selectors:[["app-my-favorits"]],standalone:!0,features:[F],decls:9,vars:4,consts:[["noBooks",""],["for","filterTag"],["type","text","id","filterTag","placeholder","Enter a tag to filter",3,"ngModelChange","input","ngModel"],[3,"click",4,"ngIf"],["class","gap",4,"ngIf","ngIfElse"],[3,"click"],[1,"pi","pi-replay"],[1,"gap"],["class","right",4,"ngFor","ngForOf","ngForTrackBy"],[1,"right"],[3,"src","alt"],[1,"title"],[1,"btn-destaq","date"],[1,"column"],[3,"for"],[3,"ngModelChange","onRate","ngModel","readonly","cancel"],[4,"ngFor","ngForOf"],[1,"row"],["type","text","placeholder","New tag... m\xE1x ( 3 )",3,"ngModelChange","ngModel"],[1,"pi","pi-sort-up-fill"],["rows","4","cols","50",3,"ngModelChange","input","id","ngModel"],["type","checkbox",1,"remove",3,"ngModelChange","id","ngModel"],[1,"red",3,"click"],[1,"pi","pi-sort-down-fill"]],template:function(t,i){if(t&1){let n=P();r(0,"main")(1,"nav")(2,"label",1),c(3,"Filter by tag:"),a(),r(4,"input",2),v("ngModelChange",function(d){return s(n),O(i.filterTag,d)||(i.filterTag=d),_(d)}),m("input",function(){return s(n),_(i.filterByTag())}),a(),f(5,q,2,0,"button",3),a(),f(6,X,2,2,"div",4)(7,Y,2,0,"ng-template",null,0,E),a()}if(t&2){let n=S(8);g(4),u("ngModel",i.filterTag),g(),C("ngIf",i.filterTag),g(),C("ngIf",i.filteredBooks.length>0)("ngIfElse",n)}},dependencies:[L,W,j,R,A,z,D,$,N,K,J],styles:["main[_ngcontent-%COMP%]{background-color:var(--contents);display:flex;flex-direction:column;gap:30px}main[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:15px;padding:10px 40px;justify-content:center;margin-top:18px;font-size:17px}main[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;border-bottom:1px solid black;background:none;height:25px;font-size:15px;letter-spacing:.5px}main[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background:var(--author);border-radius:15px;cursor:pointer}main[_ngcontent-%COMP%]   .gap[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:37px}main[_ngcontent-%COMP%]   .gap[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:10px;padding:10px 40px;justify-content:space-around;border-bottom:15px solid var(--background--primary)}main[_ngcontent-%COMP%]   .gap[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}main[_ngcontent-%COMP%]   .gap[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{box-shadow:14px 11px 8px #00000059;height:259px;width:205px}main[_ngcontent-%COMP%]   .gap[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:500;font-size:17px;margin-top:12px}main[_ngcontent-%COMP%]   .gap[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-style:italic;color:var(--author)}main[_ngcontent-%COMP%]   .gap[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;align-items:flex-start}main[_ngcontent-%COMP%]   .gap[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]{display:flex;flex-direction:column}main[_ngcontent-%COMP%]   .gap[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-style:italic;color:var(--author);margin-bottom:10px}main[_ngcontent-%COMP%]   .gap[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#000}main[_ngcontent-%COMP%]   .gap[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:10px}main[_ngcontent-%COMP%]   .gap[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;border-bottom:1px solid black;background:none;height:25px;font-size:15px;letter-spacing:.5px}main[_ngcontent-%COMP%]   .gap[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;display:flex;flex-direction:row;justify-content:center;align-items:center;border:none;background:var(--author);font-size:15px;gap:8px;border-radius:10px}main[_ngcontent-%COMP%]   .gap[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none;height:80px;padding:10px;border:none;border-radius:13px}main[_ngcontent-%COMP%]   .gap[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border:none;outline:none}main[_ngcontent-%COMP%]   .gap[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:6px}main[_ngcontent-%COMP%]   .gap[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;gap:9px;flex-direction:row;align-items:center}main[_ngcontent-%COMP%]   .gap[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent}main[_ngcontent-%COMP%]   .gap[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{cursor:pointer}main[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{width:100vw;display:flex;height:158.2px;align-items:center;justify-content:center}"]})};export{w as default};
